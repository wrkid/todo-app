{"ast":null,"code":"var _jsxFileName = \"/Users/w.k/Desktop/KATA/todo-app/src/components/app/app.js\";\nimport { React, Component } from \"react\";\nimport NewTaskForm from \"../NewTaskForm\";\nimport AppMain from \"../app-main\";\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\nimport './app.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.maxId = 0;\n    this.state = {\n      todosData: [this.createNewTask('learn JS'), this.createNewTask('drink coffee')],\n      filter: 'All'\n    };\n    this.deleteTask = id => {\n      this.setState(({\n        todosData,\n        counter\n      }) => {\n        const idx = todosData.findIndex(el => el.id === id);\n        const newData = [...todosData.slice(0, idx), ...todosData.slice(idx + 1)];\n        return {\n          todosData: newData\n        };\n      });\n    };\n    this.addTask = task => {\n      this.setState(({\n        todosData\n      }) => {\n        const newTask = this.createNewTask(task);\n        const newData = [...todosData, newTask];\n        return {\n          todosData: newData\n        };\n      });\n    };\n    this.onToggleDone = id => {\n      this.setState(({\n        todosData\n      }) => {\n        const idx = todosData.findIndex(el => el.id === id);\n        const oldTask = todosData[idx];\n        const newTask = {\n          ...oldTask,\n          done: !oldTask.done\n        };\n        const newArray = todosData.with(idx, newTask);\n        return {\n          todosData: newArray\n        };\n      });\n    };\n    this.deleteCompleted = () => {\n      this.setState(({\n        todosData\n      }) => {\n        const newData = todosData.filter(todo => !todo.done);\n        return {\n          todosData: newData\n        };\n      });\n    };\n    this.changeFilter = v => {\n      this.setState(({\n        todosData\n      }) => {\n        return {\n          filter: v\n        };\n      });\n    };\n    this.filteredTasks = () => {\n      const filter = this.state.filter;\n      if (filter === 'All') {\n        return this.state.todosData.filter(todo => todo.description);\n      }\n      const filteredData = this.state.todosData.filter(todo => {\n        if (filter === 'Active') {\n          return !todo.done;\n        } else {\n          return todo.done;\n        }\n      });\n      filteredData.forEach(task => {\n        task.createdTime = this.formatTime(task.createdTime);\n      });\n      return filteredData;\n    };\n  }\n  createNewTask(task) {\n    return {\n      id: this.maxId++,\n      done: false,\n      description: task,\n      createdTime: new Date()\n    };\n  }\n  formatTime(date) {\n    return formatDistanceToNow(date, {\n      includeSeconds: true\n    });\n  }\n  render() {\n    const todoCounter = this.state.todosData.filter(todo => !todo.done).length;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"todoapp\",\n      children: [/*#__PURE__*/_jsxDEV(NewTaskForm, {\n        addTask: this.addTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppMain, {\n        todos: this.filteredTasks() //{this.state.todosData}\n        ,\n        onDeleted: this.deleteTask,\n        onToggleDone: this.onToggleDone,\n        counter: todoCounter,\n        filter: this.state.filter,\n        changeFilter: this.changeFilter,\n        deleteCompleted: this.deleteCompleted\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","NewTaskForm","AppMain","formatDistanceToNow","jsxDEV","_jsxDEV","App","constructor","args","maxId","state","todosData","createNewTask","filter","deleteTask","id","setState","counter","idx","findIndex","el","newData","slice","addTask","task","newTask","onToggleDone","oldTask","done","newArray","with","deleteCompleted","todo","changeFilter","v","filteredTasks","description","filteredData","forEach","createdTime","formatTime","Date","date","includeSeconds","render","todoCounter","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","todos","onDeleted"],"sources":["/Users/w.k/Desktop/KATA/todo-app/src/components/app/app.js"],"sourcesContent":["import {React, Component} from \"react\";\nimport NewTaskForm from \"../NewTaskForm\";\nimport AppMain from \"../app-main\";\n\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\n\nimport './app.css'\n\nexport default class App extends Component {\n    maxId = 0;\n\n    state = {\n        todosData : [\n            this.createNewTask('learn JS'),\n            this.createNewTask('drink coffee')\n        ],\n        filter: 'All'\n    }\n\n    createNewTask(task)  {\n        return {\n            id: this.maxId ++,\n            done: false,\n            description: task,\n            createdTime: new Date()\n        };\n    };\n\n    formatTime(date) {\n        return formatDistanceToNow(date, {includeSeconds: true});\n    };\n\n    deleteTask = (id) => {\n        this.setState(({ todosData, counter }) => {\n            const idx = todosData.findIndex(el => el.id === id);\n            const newData = [\n                ...todosData.slice(0, idx),\n                ...todosData.slice(idx + 1)\n            ];\n            return {\n                todosData: newData\n            }\n        })\n    }\n\n    addTask = (task) => {\n        this.setState(({ todosData }) => {\n            const newTask = this.createNewTask(task)\n            const newData = [...todosData, newTask];\n            return {\n                todosData: newData            \n            }\n        })\n    }\n\n    onToggleDone = (id) => {\n        this.setState(({ todosData }) => {\n            const idx = todosData.findIndex(el => el.id === id);\n            const oldTask = todosData[idx];\n            const newTask = {...oldTask, done: !oldTask.done};\n            const newArray = todosData.with(idx, newTask);\n            return {\n                todosData: newArray\n            }\n        })\n    };\n\n    deleteCompleted = () => {\n        this.setState(({ todosData }) => {\n            const newData = todosData.filter(todo => !todo.done)\n            return {\n                todosData: newData\n            }\n        })\n    }\n\n    changeFilter = (v) => {\n        this.setState(({ todosData }) => {\n            return {\n                filter: v\n            }\n        })\n    }\n\n    filteredTasks = () => {\n        const filter = this.state.filter;\n        if (filter === 'All') {\n            return this.state.todosData.filter(todo => todo.description);\n        }\n        const filteredData = this.state.todosData.filter(todo => {\n            if (filter === 'Active') {\n                return !todo.done\n            } else {\n                return todo.done\n            }\n        });\n        filteredData.forEach(task => {\n            task.createdTime = this.formatTime(task.createdTime)\n        } );\n        return filteredData\n    }\n\n    render () {\n        const todoCounter = this.state.todosData.filter(todo => !todo.done).length;\n        \n        return (\n            <section className = 'todoapp'>\n                <NewTaskForm addTask = {this.addTask}/>\n                <AppMain todos = {this.filteredTasks()}//{this.state.todosData}\n                        onDeleted={this.deleteTask}\n                        onToggleDone = {this.onToggleDone}\n                        counter = {todoCounter}\n                        filter = {this.state.filter}\n                        changeFilter = {this.changeFilter}\n                        deleteCompleted = {this.deleteCompleted}/>\n            </section>\n        );\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}