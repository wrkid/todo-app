{"ast":null,"code":"var _jsxFileName = \"/Users/w.k/Documents/git/todo-app/src/components/app/app.jsx\";\nimport { React, Component } from 'react';\nimport NewTaskForm from '../NewTaskForm';\nimport AppMain from '../app-main';\nimport './app.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor() {\n    super();\n    this.deleteTask = id => {\n      this.setState(({\n        todosData\n      }) => {\n        const idx = todosData.findIndex(el => el.id === id);\n        const newData = [...todosData.slice(0, idx), ...todosData.slice(idx + 1)];\n        return {\n          todosData: newData\n        };\n      });\n    };\n    this.addTask = (task, secondsLeft) => {\n      let isPlayed = false;\n      if (secondsLeft > 0) {\n        isPlayed = true;\n      } else {\n        isPlayed = false;\n      }\n      this.setState(({\n        todosData\n      }) => {\n        const newTask = this.createNewTask(task, secondsLeft, isPlayed);\n        if (secondsLeft > 0) {\n          const interval = this.timer(newTask.id);\n          newTask.intervalId = interval;\n        }\n        const newData = [...todosData, newTask];\n        return {\n          todosData: newData\n        };\n      });\n    };\n    this.onToggleDone = id => {\n      this.setState(({\n        todosData\n      }) => {\n        const idx = todosData.findIndex(el => el.id === id);\n        const oldTask = todosData[idx];\n        const newTask = {\n          ...oldTask,\n          done: !oldTask.done\n        };\n        const newArray = todosData.with(idx, newTask);\n        return {\n          todosData: newArray\n        };\n      });\n    };\n    this.deleteCompleted = () => {\n      this.setState(({\n        todosData\n      }) => {\n        const newData = todosData.filter(todo => !todo.done);\n        return {\n          todosData: newData\n        };\n      });\n    };\n    this.changeFilter = v => {\n      this.setState(() => ({\n        filter: v\n      }));\n    };\n    this.filteredTasks = () => {\n      const {\n        todosData,\n        filter\n      } = this.state;\n      let filteredData;\n      if (filter === 'All') {\n        filteredData = todosData.filter(todo => todo.description);\n      } else {\n        filteredData = todosData.filter(todo => {\n          if (filter === 'Active') {\n            return !todo.done;\n          }\n          return todo.done;\n        });\n      }\n      return filteredData;\n    };\n    this.editTask = (idE, newDescription) => {\n      this.setState(({\n        todosData\n      }) => {\n        const idx = todosData.findIndex(el => el.id === idE);\n        const oldTask = todosData[idx];\n        const newTask = {\n          ...oldTask,\n          description: newDescription\n        };\n        const newArray = todosData.with(idx, newTask);\n        return {\n          todosData: newArray\n        };\n      });\n    };\n    // eslint-disable-next-line class-methods-use-this\n    this.timerOnGo = idT => {\n      this.setState(({\n        todosData\n      }) => {\n        const idx = todosData.findIndex(el => el.id === idT);\n        if (idx >= 0) {\n          const oldTask = todosData[idx];\n          const {\n            secondsLeft\n          } = todosData[idx];\n          const newTask = {\n            ...oldTask,\n            secondsLeft: secondsLeft - 1\n          };\n          const newArray = todosData.with(idx, newTask);\n          if (todosData[idx].secondsLeft === 1) {\n            clearInterval(todosData[idx].intervalId);\n          }\n          return {\n            todosData: newArray\n          };\n        }\n        return {};\n      });\n    };\n    this.timerStop = id => {\n      const {\n        todosData\n      } = this.state;\n      const idx = todosData.findIndex(el => el.id === id);\n      clearInterval(todosData[idx].intervalId);\n    };\n    this.timerPlay = id => {\n      const idx = todosData.findIndex(el => el.id === id);\n      setInterval(() => this.timerOnGo(id), 1000);\n    };\n    this.state = {\n      todosData: [],\n      filter: 'All'\n    };\n    this.maxId = 0;\n  }\n  // eslint-disable-next-line class-methods-use-this\n  timer(id) {\n    return setInterval(() => this.timerOnGo(id), 1000);\n  }\n  createNewTask(task, secondsLeft) {\n    this.maxId += 1;\n    const newId = this.maxId.toString();\n    return {\n      id: newId,\n      done: false,\n      description: task,\n      secondsLeft,\n      createdTime: new Date()\n    };\n  }\n  render() {\n    const {\n      todosData,\n      filter\n    } = this.state;\n    const todoCounter = todosData.filter(todo => !todo.done).length;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"todoapp\",\n      children: [/*#__PURE__*/_jsxDEV(NewTaskForm, {\n        addTask: this.addTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppMain, {\n        todos: this.filteredTasks(),\n        onDeleted: this.deleteTask,\n        onToggleDone: this.onToggleDone,\n        counter: todoCounter,\n        filter: filter,\n        changeFilter: this.changeFilter,\n        deleteCompleted: this.deleteCompleted,\n        editTask: this.editTask,\n        timerStop: this.timerStop,\n        timerPlay: this.timerPlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","NewTaskForm","AppMain","jsxDEV","_jsxDEV","App","constructor","deleteTask","id","setState","todosData","idx","findIndex","el","newData","slice","addTask","task","secondsLeft","isPlayed","newTask","createNewTask","interval","timer","intervalId","onToggleDone","oldTask","done","newArray","with","deleteCompleted","filter","todo","changeFilter","v","filteredTasks","state","filteredData","description","editTask","idE","newDescription","timerOnGo","idT","clearInterval","timerStop","timerPlay","setInterval","maxId","newId","toString","createdTime","Date","render","todoCounter","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","todos","onDeleted","counter"],"sources":["/Users/w.k/Documents/git/todo-app/src/components/app/app.jsx"],"sourcesContent":["import { React, Component } from 'react';\nimport NewTaskForm from '../NewTaskForm';\nimport AppMain from '../app-main';\nimport './app.css';\n\nexport default class App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      todosData: [],\n      filter: 'All',\n    };\n    this.maxId = 0;\n  }\n\n  deleteTask = (id) => {\n    this.setState(({ todosData }) => {\n      const idx = todosData.findIndex((el) => el.id === id);\n      const newData = [...todosData.slice(0, idx), ...todosData.slice(idx + 1)];\n      return {\n        todosData: newData,\n      };\n    });\n  };\n\n  addTask = (task, secondsLeft) => {\n    let isPlayed = false;\n    if (secondsLeft > 0) {\n      isPlayed = true;\n    } else {\n      isPlayed = false;\n    }\n    this.setState(({ todosData }) => {\n      const newTask = this.createNewTask(task, secondsLeft, isPlayed);\n      if (secondsLeft > 0) {\n        const interval = this.timer(newTask.id);\n        newTask.intervalId = interval;\n      }\n      const newData = [...todosData, newTask];\n      return {\n        todosData: newData,\n      };\n    });\n  };\n\n  onToggleDone = (id) => {\n    this.setState(({ todosData }) => {\n      const idx = todosData.findIndex((el) => el.id === id);\n      const oldTask = todosData[idx];\n      const newTask = { ...oldTask, done: !oldTask.done };\n      const newArray = todosData.with(idx, newTask);\n      return {\n        todosData: newArray,\n      };\n    });\n  };\n\n  deleteCompleted = () => {\n    this.setState(({ todosData }) => {\n      const newData = todosData.filter((todo) => !todo.done);\n      return {\n        todosData: newData,\n      };\n    });\n  };\n\n  changeFilter = (v) => {\n    this.setState(() => ({ filter: v }));\n  };\n\n  filteredTasks = () => {\n    const { todosData, filter } = this.state;\n    let filteredData;\n    if (filter === 'All') {\n      filteredData = todosData.filter((todo) => todo.description);\n    } else {\n      filteredData = todosData.filter((todo) => {\n        if (filter === 'Active') {\n          return !todo.done;\n        }\n        return todo.done;\n      });\n    }\n    return filteredData;\n  };\n\n  editTask = (idE, newDescription) => {\n    this.setState(({ todosData }) => {\n      const idx = todosData.findIndex((el) => el.id === idE);\n      const oldTask = todosData[idx];\n      const newTask = { ...oldTask, description: newDescription };\n      const newArray = todosData.with(idx, newTask);\n      return {\n        todosData: newArray,\n      };\n    });\n  };\n\n  // eslint-disable-next-line class-methods-use-this\n  timerOnGo = (idT) => {\n    this.setState(({ todosData }) => {\n      const idx = todosData.findIndex((el) => el.id === idT);\n      if (idx >= 0) {\n        const oldTask = todosData[idx];\n        const { secondsLeft } = todosData[idx]\n        const newTask = { ...oldTask, secondsLeft: secondsLeft - 1};\n        const newArray = todosData.with(idx, newTask);\n        if (todosData[idx].secondsLeft === 1) {\n          clearInterval(todosData[idx].intervalId)\n        }\n        return {\n          todosData: newArray,\n        };\n      }\n      return {};\n    });\n  };\n\n  timerStop = (id) => {\n    const { todosData } = this.state\n    const idx = todosData.findIndex((el) => el.id === id);\n    clearInterval(todosData[idx].intervalId)\n  }\n\n  timerPlay = (id) => {\n    const idx = todosData.findIndex((el) => el.id === id);\n    setInterval(() => (this.timerOnGo(id)), 1000);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  timer(id) {\n    return setInterval(() => (this.timerOnGo(id)), 1000);\n  }\n\n  createNewTask(task, secondsLeft) {\n    this.maxId += 1;\n    const newId = this.maxId.toString();\n    return {\n      id: newId,\n      done: false,\n      description: task,\n      secondsLeft,\n      createdTime: new Date(),\n    };\n  }\n\n  render() {\n    const { todosData, filter } = this.state;\n    const todoCounter = todosData.filter((todo) => !todo.done).length;\n    return (\n      <section className=\"todoapp\">\n        <NewTaskForm addTask={this.addTask} />\n        <AppMain\n          todos={this.filteredTasks()}\n          onDeleted={this.deleteTask}\n          onToggleDone={this.onToggleDone}\n          counter={todoCounter}\n          filter={filter}\n          changeFilter={this.changeFilter}\n          deleteCompleted={this.deleteCompleted}\n          editTask={this.editTask}\n          timerStop={this.timerStop}\n          timerPlay={this.timerPlay}\n        />\n      </section>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}