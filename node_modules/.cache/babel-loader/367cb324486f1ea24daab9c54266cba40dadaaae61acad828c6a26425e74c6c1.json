{"ast":null,"code":"var _jsxFileName = \"/Users/w.k/Documents/git/todo-app/src/components/timer/timer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Timer({\n  id,\n  secondsToDo,\n  isPlayed\n}) {\n  _s();\n  const [secondsLeft, setSecondsLeft] = useState(null);\n  const [isGoing, setIsGoing] = useState(null);\n  let interval;\n  useEffect(() => {\n    if (secondsToDo) {\n      const lastTime = localStorage.getItem(id.toString());\n      if (lastTime) {\n        const last = new Date(lastTime);\n        const now = new Date();\n        const toGo = secondsToDo - Math.floor((now.getTime() - last.getTime()) / 1000);\n        localStorage.removeItem(id.toString());\n        if (toGo > 0 && isPlayed) {\n          setSecondsLeft(toGo);\n        } else {\n          setSecondsLeft(secondsToDo);\n        }\n      } else {\n        setSecondsLeft(secondsToDo);\n      }\n      if (isPlayed) {\n        const interval = setInterval(updateTimer, 1000);\n      }\n      ;\n    }\n    return () => {\n      if (secondsLeft > 0) {\n        localStorage.setItem(id, new Date());\n      }\n      const {\n        isGoing\n      } = this.state;\n      timerOnGo(id, secondsLeft, isGoing);\n      clearInterval(this.interval);\n    };\n  }, []);\n  const updateTimer = () => {\n    const newTime = secondsLeft - 1;\n    if (newTime === 0) {\n      clearInterval(interval);\n    }\n    setSecondsLeft(newTime);\n  };\n  const timerOnPause = () => {\n    timerOnGo(id, secondsLeft, false);\n    clearInterval(interval);\n  };\n  const timerOnPlay = () => {\n    if (secondsToDo) {\n      this.setState({\n        secondsToDo,\n        isGoing: true\n      });\n      const interval = setInterval(updateTimer, 1000);\n    }\n  };\n  const getTimeStr = () => {\n    const newMin = Math.floor(secondsLeft / 60);\n    const newSec = secondsLeft - newMin * 60;\n    return `${newMin}:${newSec}`;\n  };\n  if (!secondsToDo) {\n    return null;\n  }\n  const time = getTimeStr();\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"description\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      \"aria-label\": \"icon-play\",\n      type: \"button\",\n      className: \"icon icon-play\",\n      onClick: timerOnPlay\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      \"aria-label\": \"icon stop\",\n      type: \"button\",\n      className: \"icon icon-pause\",\n      onClick: timerOnPause\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), time]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n// export default class Timer extends React.Component {\n//   constructor() {\n//     super();\n//     this.state = {\n//       secondsToDo: null,\n//       isGoing: null\n//     };\n//   }\n\n//   componentDidMount() {\n//     const { id, secondsToDo, isPlayed } = this.props;\n//     if (secondsToDo) {\n//       const lastTime = localStorage.getItem(id.toString());\n//       if (lastTime) {\n//         const last = new Date(lastTime);\n//         const now = new Date();\n//         const toGo = secondsToDo - Math.floor((now.getTime() - last.getTime()) / 1000);\n//         localStorage.removeItem(id.toString());\n//         if (toGo > 0 && isPlayed) {\n//           this.setState({\n//             secondsToDo: toGo,\n//           });\n//         } else {\n//           this.setState({\n//             secondsToDo,\n//           });\n//         }\n//       } else {\n//         this.setState({\n//           secondsToDo,\n//         });\n//       }\n//       if (isPlayed) this.interval = setInterval(this.updateTimer, 1000);\n//     }\n//   }\n\n// componentWillUnmount() {\n//   const { id, timerOnGo } = this.props;\n//   const { secondsToDo } = this.state;\n//   if (secondsToDo > 0) {\n//     localStorage.setItem(id, new Date());\n//   }\n//   const { isGoing } = this.state;\n//   timerOnGo(id, secondsToDo, isGoing);\n//   clearInterval(this.interval);\n// }\n\n// updateTimer = () => {\n//   const { secondsToDo } = this.state;\n//   const newTime = secondsToDo - 1;\n//   if (newTime === 0) {\n//     clearInterval(this.interval);\n//   }\n//   this.setState(() => ({\n//     secondsToDo: newTime,\n//   }));\n// };\n\n// timerOnPause = () => {\n//   const { id, timerOnGo } = this.props;\n//   const { secondsToDo } = this.state;\n//   timerOnGo(id, secondsToDo, false);\n//   clearInterval(this.interval);\n// };\n\n// timerOnPlay = () => {\n//   const { secondsToDo } = this.props;\n//   if (secondsToDo) {\n//     this.setState({\n//       secondsToDo,\n//       isGoing: true,\n//     });\n//     this.interval = setInterval(this.updateTimer, 1000);\n//   }\n// };\n\n// getTimeStr = () => {\n//   const { secondsToDo } = this.state;\n//   const newMin = Math.floor(secondsToDo / 60);\n//   const newSec = secondsToDo - newMin * 60;\n//   return `${newMin}:${newSec}`;\n// };\n\n// render() {\n//   const { secondsToDo } = this.props;\n// if (!secondsToDo) {\n//   return null;\n// }\n// const time = this.getTimeStr();\n\n// return (\n//   <span className=\"description\">\n//     <button\n//       aria-label=\"icon-play\"\n//       type=\"button\"\n//       className=\"icon icon-play\"\n//       onClick={this.timerOnPlay}\n//     />\n//     <button\n//       aria-label=\"icon stop\"\n//       type=\"button\"\n//       className=\"icon icon-pause\"\n//       onClick={this.timerOnPause}\n//     />\n//     {time}\n//   </span>\n// );\n//   }\n// }\n_s(Timer, \"BPN0aU6fnmkOp1EIFHCGPVLRvVo=\");\n_c = Timer;\nTimer.defaultProps = {\n  secondsToDo: 0\n};\nTimer.propTypes = {\n  id: PropTypes.string.isRequired,\n  secondsToDo: PropTypes.number,\n  isPlayed: PropTypes.bool.isRequired,\n  timerOnGo: PropTypes.func.isRequired\n};\nvar _c;\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","jsxDEV","_jsxDEV","Timer","id","secondsToDo","isPlayed","_s","secondsLeft","setSecondsLeft","isGoing","setIsGoing","interval","lastTime","localStorage","getItem","toString","last","Date","now","toGo","Math","floor","getTime","removeItem","setInterval","updateTimer","setItem","state","timerOnGo","clearInterval","newTime","timerOnPause","timerOnPlay","setState","getTimeStr","newMin","newSec","time","className","children","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","defaultProps","propTypes","string","isRequired","number","bool","func","$RefreshReg$"],"sources":["/Users/w.k/Documents/git/todo-app/src/components/timer/timer.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport PropTypes from 'prop-types';\n\nexport default function Timer ({ id, secondsToDo, isPlayed }) {\n  const [ secondsLeft, setSecondsLeft ] = useState(null);\n  const [ isGoing, setIsGoing ] = useState(null);\n  let interval;\n\n  useEffect(() => {\n    if (secondsToDo) {\n      const lastTime = localStorage.getItem(id.toString());\n      if (lastTime) {\n        const last = new Date(lastTime);\n        const now = new Date();\n        const toGo = secondsToDo - Math.floor((now.getTime() - last.getTime()) / 1000);\n        localStorage.removeItem(id.toString());\n        if (toGo > 0 && isPlayed) {\n          setSecondsLeft(toGo);\n        } else {\n          setSecondsLeft(secondsToDo);\n        }\n      } else {\n        setSecondsLeft(secondsToDo);\n      }\n      if (isPlayed) {\n        const interval = setInterval(updateTimer, 1000)\n      };\n    }\n\n    return () => {\n      if (secondsLeft > 0) {\n        localStorage.setItem(id, new Date());\n      }\n      const { isGoing } = this.state;\n      timerOnGo(id, secondsLeft, isGoing);\n      clearInterval(this.interval);\n    }\n  }, [])\n\n\n  const updateTimer = () => {\n    const newTime = secondsLeft - 1;\n    if (newTime === 0) {\n      clearInterval(interval);\n    }\n    setSecondsLeft(newTime)\n  };\n\n  const timerOnPause = () => {\n    timerOnGo(id, secondsLeft, false);\n    clearInterval(interval);\n  };\n\n  const timerOnPlay = () => {\n    if (secondsToDo) {\n      this.setState({\n        secondsToDo,\n        isGoing: true,\n      });\n      const interval = setInterval(updateTimer, 1000);\n    }\n  };\n\n  const getTimeStr = () => {\n    const newMin = Math.floor(secondsLeft / 60);\n    const newSec = secondsLeft - newMin * 60;\n    return `${newMin}:${newSec}`;\n  };\n\n  if (!secondsToDo) {\n    return null;\n  }\n  const time = getTimeStr();\n\n  return (\n    <span className=\"description\">\n      <button\n        aria-label=\"icon-play\"\n        type=\"button\"\n        className=\"icon icon-play\"\n        onClick={timerOnPlay}\n      />\n      <button\n        aria-label=\"icon stop\"\n        type=\"button\"\n        className=\"icon icon-pause\"\n        onClick={timerOnPause}\n      />\n      {time}\n    </span>\n  );\n\n}\n\n// export default class Timer extends React.Component {\n//   constructor() {\n//     super();\n//     this.state = {\n//       secondsToDo: null,\n//       isGoing: null\n//     };\n//   }\n\n//   componentDidMount() {\n//     const { id, secondsToDo, isPlayed } = this.props;\n//     if (secondsToDo) {\n//       const lastTime = localStorage.getItem(id.toString());\n//       if (lastTime) {\n//         const last = new Date(lastTime);\n//         const now = new Date();\n//         const toGo = secondsToDo - Math.floor((now.getTime() - last.getTime()) / 1000);\n//         localStorage.removeItem(id.toString());\n//         if (toGo > 0 && isPlayed) {\n//           this.setState({\n//             secondsToDo: toGo,\n//           });\n//         } else {\n//           this.setState({\n//             secondsToDo,\n//           });\n//         }\n//       } else {\n//         this.setState({\n//           secondsToDo,\n//         });\n//       }\n//       if (isPlayed) this.interval = setInterval(this.updateTimer, 1000);\n//     }\n//   }\n\n  // componentWillUnmount() {\n  //   const { id, timerOnGo } = this.props;\n  //   const { secondsToDo } = this.state;\n  //   if (secondsToDo > 0) {\n  //     localStorage.setItem(id, new Date());\n  //   }\n  //   const { isGoing } = this.state;\n  //   timerOnGo(id, secondsToDo, isGoing);\n  //   clearInterval(this.interval);\n  // }\n\n  // updateTimer = () => {\n  //   const { secondsToDo } = this.state;\n  //   const newTime = secondsToDo - 1;\n  //   if (newTime === 0) {\n  //     clearInterval(this.interval);\n  //   }\n  //   this.setState(() => ({\n  //     secondsToDo: newTime,\n  //   }));\n  // };\n\n  // timerOnPause = () => {\n  //   const { id, timerOnGo } = this.props;\n  //   const { secondsToDo } = this.state;\n  //   timerOnGo(id, secondsToDo, false);\n  //   clearInterval(this.interval);\n  // };\n\n  // timerOnPlay = () => {\n  //   const { secondsToDo } = this.props;\n  //   if (secondsToDo) {\n  //     this.setState({\n  //       secondsToDo,\n  //       isGoing: true,\n  //     });\n  //     this.interval = setInterval(this.updateTimer, 1000);\n  //   }\n  // };\n\n  // getTimeStr = () => {\n  //   const { secondsToDo } = this.state;\n  //   const newMin = Math.floor(secondsToDo / 60);\n  //   const newSec = secondsToDo - newMin * 60;\n  //   return `${newMin}:${newSec}`;\n  // };\n\n  // render() {\n  //   const { secondsToDo } = this.props;\n    // if (!secondsToDo) {\n    //   return null;\n    // }\n    // const time = this.getTimeStr();\n\n    // return (\n    //   <span className=\"description\">\n    //     <button\n    //       aria-label=\"icon-play\"\n    //       type=\"button\"\n    //       className=\"icon icon-play\"\n    //       onClick={this.timerOnPlay}\n    //     />\n    //     <button\n    //       aria-label=\"icon stop\"\n    //       type=\"button\"\n    //       className=\"icon icon-pause\"\n    //       onClick={this.timerOnPause}\n    //     />\n    //     {time}\n    //   </span>\n    // );\n//   }\n// }\n\nTimer.defaultProps = {\n  secondsToDo: 0,\n};\nTimer.propTypes = {\n  id: PropTypes.string.isRequired,\n  secondsToDo: PropTypes.number,\n  isPlayed: PropTypes.bool.isRequired,\n  timerOnGo: PropTypes.func.isRequired,\n};\n"],"mappings":"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,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvB,CAAC,EACDR,IAAI;EAAA;IAAAK,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD,CAAC;AAGX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACJ;AACA;AAAAvC,EAAA,CAvMwBJ,KAAK;AAAA4C,EAAA,GAAL5C,KAAK;AAyM7BA,KAAK,CAAC6C,YAAY,GAAG;EACnB3C,WAAW,EAAE;AACf,CAAC;AACDF,KAAK,CAAC8C,SAAS,GAAG;EAChB7C,EAAE,EAAEJ,SAAS,CAACkD,MAAM,CAACC,UAAU;EAC/B9C,WAAW,EAAEL,SAAS,CAACoD,MAAM;EAC7B9C,QAAQ,EAAEN,SAAS,CAACqD,IAAI,CAACF,UAAU;EACnCtB,SAAS,EAAE7B,SAAS,CAACsD,IAAI,CAACH;AAC5B,CAAC;AAAC,IAAAJ,EAAA;AAAAQ,YAAA,CAAAR,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}